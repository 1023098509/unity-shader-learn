# 概念阶段

![-](https://github.com/1023098509/unity-shader-learn/blob/master/image/2_1.png?raw=true "概念阶段")

# CPU流水线

## **应用阶段**

应用阶段，其中应用指的是我们的游戏程序，本阶段完全由我们开发者自己定制。

### 1.加载数据

准备好数据，比如从硬盘里加载要使用的场景（带有光照和摄像头数据）、模型、图片、着色器代码等文件到内存。

### 2.设置渲染状态

设置好使用哪些网格（mesh）、材质（material）、纹理（texture）、着色器（shader）等进行本次渲染。

### 3.调用draw call

通过调用命令来开始本次渲染。

# GPU流水线

![-](https://github.com/1023098509/unity-shader-learn/blob/master/image/2_2.png?raw=true "几何阶段与光栅化阶段")

## **几何阶段**

### 1.顶点着色器

进行坐标转换和逐顶点光照。

### 2.裁剪

裁剪物体在摄像头外的部分。

### 3.屏幕映射

将顶点坐标根据屏幕像素进行一定比例的缩放。

## **光栅化阶段**

### 1.三角形设置

通过顶点计算出三角形网格。

### 2.三角形遍历

通过三角形网格来遍历像素生产片元。

注：一个片元并不是真正意义上的像素，而是包含了很多状态的集合，这些状态用于计算每个像素的最终颜色。这些状态包括了（但不限于）它的屏幕坐标、深度信息，以及其他从几何阶段输出的顶点信息，例如法线、纹理坐标等。

### 3.片元着色器

自己进行shader编程，能做出多种渲染效果，比如改颜色。

### 4.逐片元操作

对每个片元首先进行测试，然后对通过的片元进行合并。

![-](https://github.com/1023098509/unity-shader-learn/blob/master/image/2_3.png?raw=true "逐片元操作")
